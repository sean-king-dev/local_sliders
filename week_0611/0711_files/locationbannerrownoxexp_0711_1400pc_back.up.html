<script>
    //     const locations = [
    //     {
    //         id: '1',
    //         title: 'One',
    //         image: 'https://placehold.co/1920x1080?text=One',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Oxford'
    //     },
    //     {
    //         id: '2',
    //         title: 'Two',
    //         image: 'https://placehold.co/1920x1080?text=Two',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Hove'
    //     },
    //     {
    //         id: '3',
    //         title: 'Three',
    //         image: 'https://placehold.co/1920x1080?text=Three',
    //         ctaLink: 'https://en.wikipedia.org/wiki/London'
    //     },
    //     {
    //         id: '4',
    //         title: 'Four',
    //         image: 'https://placehold.co/1920x1080?text=Four',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Crouch_End'
    //     },
    //     {
    //         id: '5',
    //         title: 'Five',
    //         image: 'https://placehold.co/1920x1080?text=Five',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Battersea'
    //     },
    //     {
    //         id: '6',
    //         title: 'Six',
    //         image: 'https://placehold.co/1920x1080?text=Six',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Hackney'
    //     },
    //     {
    //         id: '7',
    //         title: 'Seven',
    //         image: 'https://placehold.co/1920x1080?text=Seven',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Hammersmith'
    //     },
    //     {
    //         id: '8',
    //         title: 'Eight',
    //         image: 'https://placehold.co/1920x1080?text=Eight',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Putney'
    //     },
    //     {
    //         id: '9',
    //         title: 'Nine',
    //         image: 'https://placehold.co/1920x1080?text=Nine',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Archway'
    //     },
    //     {
    //         id: '10',
    //         title: 'Ten',
    //         image: 'https://placehold.co/1920x1080?text=Ten',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Nunhead'
    //     },
    //       {
    //         id: '11',
    //         title: 'Eleven',
    //         image: 'https://placehold.co/1920x1080?text=Eleven',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Oxford'
    //     },
    //     {
    //         id: '12',
    //         title: 'Twelve',
    //         image: 'https://placehold.co/1920x1080?text=Twelve',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Hove'
    //     },
    //     {
    //         id: '13',
    //         title: 'Thirteen',
    //         image: 'https://placehold.co/1920x1080?text=Thirteen',
    //         ctaLink: 'https://en.wikipedia.org/wiki/London'
    //     },
    //     {
    //         id: '14',
    //         title: 'Fourteen',
    //         image: 'https://placehold.co/1920x1080?text=Fourteen',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Crouch_End'
    //     },
    //     {
    //         id: '15',
    //         title: 'Fifteen',
    //         image: 'https://placehold.co/1920x1080?text=Fifteen',
    //         ctaLink: 'https://en.wikipedia.org/wiki/Battersea'
    //     },
    // ];
    
    // window.addEventListener("DOMContentLoaded", function(){
    
    // const mainSlide = document.querySelector(".main_slide_inner");
    // const thumbSlide = document.querySelector(".thumb_slide_inner");
    // const thumbSliderButton = document.querySelector(".thumb_slider_button");
    // const thumbSlideItems = document.querySelectorAll(".thumb_slide_item");
    
        
    // let currentSlideIndex = 0;
    // let currentIndex = 0;
    // let currentThumbIndex = 0;
    
    // const mainlocations =  document.querySelectorAll(".main_fade_slide");
    
    // const thumblocations = document.querySelectorAll(".hidden_thumb_slide");
    
    //   locations.forEach((location, index) => {
    //     const mainSlideItem = document.createElement("div");
    //     mainSlideItem.classList.add("main_slide_item");
    
    //     mainSlideItem.innerHTML = `
    //     <div class="location_item">
    //       <div class="main-image-slide" style="background-image: url('${location.image}')">
    //         <p class="h5 location-title">${location.title}</p>
    //         <a href="${location.ctaLink}" class="cta-link"><span>Go</span></a>
    //       </div>
    //       </div>
    //     `;
    
    //     mainSlide.appendChild(mainSlideItem);
    
    //   });
    
    //   locations.forEach((location, index) => {
    
    //     const thumbSlideItem = document.createElement("div");
    //     thumbSlideItem.classList.add("thumb_slide_item");
        
    //     thumbSlideItem.innerHTML = `
    //     <div class="thumb_location_item">
    //     <div class="map_pin show-pin">&#9906;</div>
    //       <div class="thumb-image-slide" style="background-image: url('${location.image}')">
    //         <p class="h5 thumb-location-title">${location.title}</p>
    //         <a href="${location.ctaLink}" class="thumb-cta-link show-go"><span class="go-button">Go</span><span class="go-arrow">&#8702;</span></a>
    //       </div>
    //       </div>
    //     `;
     
    //     thumbSlide.appendChild(thumbSlideItem);
        
    //   });
    
    //   function activateMainSlide(index) {
    //     const mainSlideItems = document.querySelectorAll(".main_slide_item");
    //     mainSlideItems.forEach((item) => item.classList.remove("active"));
    //     mainSlideItems[index].classList.add("active");
    //   }
      
    //   function activateThumbnailSlide(index) {
    //     const thumbSlideItems = document.querySelectorAll(".thumb_slide_item");
    //     thumbSlideItems.forEach((item) => item.classList.remove("active"));
    //     thumbSlideItems[index].classList.add("active");
    
    //     // maximum scroll position to ensure the last items are fully visible
    //     const thumbSlideItemWidth = thumbSlideItems[0].offsetWidth;
    //     const thumbSliderButtonWidth = thumbSliderButton.offsetWidth;
    //     const totalWidth = thumbSlideItemWidth * locations.length;
    //     const maxScrollPosition = totalWidth - thumbSliderButtonWidth;
    
    //     // scroll position for the current item
    //     let scrollPosition = thumbSlideItemWidth * index;
    //     const centerOffset = thumbSliderButtonWidth / 1.15;
    
    //     // Adjust scrollPosition if the current item is one of the last few items
    //     if (index >= locations.length - 1) {
    //       scrollPosition = maxScrollPosition;
    //     } else if (index > 0) {
    //       scrollPosition -= centerOffset;
    //     }
    
    //     // make sure the scrollPosition stays within bounds
    //     scrollPosition = Math.max(0, Math.min(maxScrollPosition, scrollPosition));
    
    //     thumbSlide.scrollLeft = scrollPosition;
    //   }
    
    //   function activateSlide(index) {
    //     activateMainSlide(index); // Apply active class to main slides
    //     activateThumbnailSlide(index); // Apply active class to thumbnail slides
    //   }
    
    //   function nextSlide() {
    //     currentIndex = (currentIndex + 1) % locations.length;
    //     activateSlide(currentIndex);
    //   }
    
    //   let slideInterval = setInterval(nextSlide, 2000);
    
    //   thumbSlide.addEventListener("mouseenter", function () {
    //     clearInterval(slideInterval);
    //   });
    
    //   thumbSlide.addEventListener("mouseleave", function () {
    //     slideInterval = setInterval(nextSlide, 2000);
    //   });
    
    //   activateSlide(currentIndex);
    
    //   // Add these variables to your existing code
    //   const prevButton = document.getElementById("slide-arrow-prev");
    //   const nextButton = document.getElementById("slide-arrow-next");
    
    //   // Add event listeners to the previous and next buttons
    //   prevButton.addEventListener("click", () => {
    //     currentIndex = (currentIndex - 1 + locations.length) % locations.length;
    //     activateSlide(currentIndex);
    //   });
    
    //   nextButton.addEventListener("click", () => {
    //     currentIndex = (currentIndex + 1) % locations.length;
    //     activateSlide(currentIndex);
    //   });
    
    
      // exp
    
    
    //   window.addEventListener("DOMContentLoaded", function() {
    //   // Select all the main_fade_slide elements
    //   var slides = document.querySelectorAll('.main_fade_slide');
    
    //   // Initialize an empty array to hold the JSON objects
    //   var jsonArray = [];
    
    //   // Loop through each slide and extract the relevant data
    //   slides.forEach(function(slide) {
    //     var jsonObj = {
    //       desktop: {
    //         link: slide.querySelector('.main_slide_item').getAttribute('data-link'),
    //         backgroundImage: slide.querySelector('.main_slide_item').style.backgroundImage.slice(5, -2),
    //         image: slide.querySelector('.main_img_div').src,
    //         altText: slide.querySelector('.main_img_div').alt
    //       },
    //       mobile: {
    //         link: slide.querySelector('.mobile_slide_item').getAttribute('data-link'),
    //         backgroundImage: slide.querySelector('.mobile_slide_item').style.backgroundImage.slice(5, -2),
    //         image: slide.querySelector('.mobile_img_div').src,
    //         altText: slide.querySelector('.mobile_img_div').alt
    //       },
    //       thumbnail: {
    //         link: slide.querySelector('.thumb_link').getAttribute('href'),
    //         image: slide.querySelector('.thumb img').src,
    //         altText: slide.querySelector('.thumb img').alt,
    //         title: slide.querySelector('.thumb img').title
    //       }
    //     };
    //     jsonArray.push(jsonObj);
    //   });
    
    //   // The createCarousels function
    //   function createCarousels(slidesArray) {
    //     // Function to create a desktop carousel slide
    //     const createDesktopSlide = (slide) => `
    //       <div class="main_slide_item" style="background-image: url('${slide.desktop.backgroundImage}');">
    //         <img class="main_img_div" src="${slide.desktop.image}" alt="${slide.desktop.altText}">
    //         <a href="${slide.desktop.link}"></a>
    //       </div>
    //     `;
    
    //     // Function to create a thumbnail carousel slide
    //     const createThumbnailSlide = (slide) => `
    //       <div class="thumb_slide_item">
    //         <img src="${slide.thumbnail.image}" alt="${slide.thumbnail.altText}" title="${slide.thumbnail.title}">
    //         <a class="thumb_link" href="${slide.thumbnail.link}">Go</a>
    //       </div>
    //     `;
    
    //     // Start the carousels HTML with the opening div tags
    //     let desktopCarouselHTML = '<div class="desktop_carousel">';
    //     let thumbnailCarouselHTML = '<div class="thumbnail_carousel">';
    
    //     // Loop through each slide object and concatenate the HTML strings
    //     slidesArray.forEach((slide) => {
    //       desktopCarouselHTML += createDesktopSlide(slide);
    //       thumbnailCarouselHTML += createThumbnailSlide(slide);
    //     });
    
    //     // Close the div tags for each carousel
    //     desktopCarouselHTML += '</div>';
    //     thumbnailCarouselHTML += '</div>';
    
    //     // Return an object containing both carousel HTML strings
    //     return {
    //       desktopCarouselHTML,
    //       thumbnailCarouselHTML
    //     };
    //   }
    
    //   // Call the createCarousels function with jsonArray
    //   const carouselsHTML = createCarousels(jsonArray);
    
    //   // Check if the container elements exist before trying to set their innerHTML
    //   var desktopCarouselContainer = document.getElementById('desktopCarouselContainer');
    //   var thumbnailCarouselContainer = document.getElementById('thumbnailCarouselContainer');
    
    //   if (desktopCarouselContainer && thumbnailCarouselContainer) {
    //     desktopCarouselContainer.innerHTML = carouselsHTML.desktopCarouselHTML;
    //     thumbnailCarouselContainer.innerHTML = carouselsHTML.thumbnailCarouselHTML;
    //   } else {
    //     console.error('Carousel containers not found.');
    //   }
    // });
    
    window.addEventListener("DOMContentLoaded", function() {
      // Select all the main_fade_slide elements
      var slides = document.querySelectorAll('.main_fade_slide');
      console.log('Number of slides found:', slides.length); // Check how many slides were found$()
    
      // Initialize an empty array to hold the JSON objects
      var jsonArray = [];
    
      // Loop through each slide and extract the relevant data
      slides.forEach(function(slide, index) {
        // Added error handling for null elements
        var mainSlideItem = slide.querySelector('.main_slide_item');
        var mainImgDiv = slide.querySelector('.main_img_div');
        var mobileSlideItem = slide.querySelector('.mobile_slide_item');
        var mobileImgDiv = slide.querySelector('.mobile_img_div');
        var thumbLink = slide.querySelector('.thumb_link');
        var thumbImg = slide.querySelector('.thumb img');
    
        if (!mainSlideItem || !mainImgDiv || !mobileSlideItem || !mobileImgDiv || !thumbLink || !thumbImg) {
          console.error('Missing elements in slide number', index);
          return; // Skip this iteration if elements are missing
        }
    
        var jsonObj = {
          desktop: {
            link: mainSlideItem.getAttribute('data-link'),
            backgroundImage: mainSlideItem.style.backgroundImage.slice(5, -2).replace(/"/g, ""),
            image: mainImgDiv.src,
            altText: mainImgDiv.alt
          },
          mobile: {
            link: mobileSlideItem.getAttribute('data-link'),
            backgroundImage: mobileSlideItem.style.backgroundImage.slice(5, -2).replace(/"/g, ""),
            image: mobileImgDiv.src,
            altText: mobileImgDiv.alt
          },
          thumbnail: {
            link: thumbLink.getAttribute('href'),
            image: thumbImg.src,
            altText: thumbImg.alt,
            title: thumbImg.title
          }
        };
        jsonArray.push(jsonObj);
      });
    
      if(jsonArray.length === 0) {
        console.error('No slides were added to the array. Check the class names and HTML structure.');
        return; // Stop execution if no slides were added
      }
    
      // The createCarousels function
      function createCarousels(slidesArray) {
        // Function to create a desktop carousel slide
        const createDesktopSlide = (slide) => `
          <div class="main_slide_item" style="background-image: url('${slide.desktop.backgroundImage}');">
            <img class="main_img_div" src="${slide.desktop.image}" alt="${slide.desktop.altText}">
            <a href="${slide.desktop.link}"></a>
          </div>
        `;
    
        // Function to create a thumbnail carousel slide
        const createThumbnailSlide = (slide) => `
          <div class="thumb_slide_item">
            <img src="${slide.thumbnail.image}" alt="${slide.thumbnail.altText}" title="${slide.thumbnail.title}">
            <a class="thumb_link" href="${slide.thumbnail.link}">Go</a>
          </div>
        `;
    
        // Start the carousels HTML with the opening div tags
        let desktopCarouselHTML = '<div class="desktop_carousel">';
        let thumbnailCarouselHTML = '<div class="thumbnail_carousel">';
    
        // Loop through each slide object and concatenate the HTML strings
        slidesArray.forEach((slide) => {
          desktopCarouselHTML += createDesktopSlide(slide);
          thumbnailCarouselHTML += createThumbnailSlide(slide);
        });
    
        // Close the div tags for each carousel
        desktopCarouselHTML += '</div>';
        thumbnailCarouselHTML += '</div>';
    
        // Return an object containing both carousel HTML strings
        return {
          desktopCarouselHTML,
          thumbnailCarouselHTML
        };
    
          // After generating the carousels
      var desktopCarouselContainer = document.getElementById('desktopCarouselContainer');
      var thumbnailCarouselContainer = document.getElementById('thumbnailCarouselContainer');
    
      if (desktopCarouselContainer && thumbnailCarouselContainer) {
        desktopCarouselContainer.innerHTML = carouselsHTML.desktopCarouselHTML;
        thumbnailCarouselContainer.innerHTML = carouselsHTML.thumbnailCarouselHTML;
    
        // Add navigation buttons for the thumbnail carousel
        // addCarouselNavigation(thumbnailCarouselContainer, '.thumb_slide_item');
    
        console.log('Carousels populated and navigation set up successfully.');
      } else {
        console.error('Carousel containers not found.');
      }
      }
    
    //   function addCarouselNavigation(carouselContainer, slideSelector) {
    //   let currentActiveIndex = 0;
    //   let slides = carouselContainer.querySelectorAll(slideSelector);
    //   let intervalId;
    
    //   // Function to create navigation buttons and append them to the container
    //   function createNavButtons() {
    //     const prevButton = document.createElement('button');
    //     prevButton.innerText = 'Prev';
    //     prevButton.addEventListener('click', () => updateActiveSlide(currentActiveIndex - 1));
    //     carouselContainer.appendChild(prevButton);
    
    //     const nextButton = document.createElement('button');
    //     nextButton.innerText = 'Next';
    //     nextButton.addEventListener('click', () => updateActiveSlide(currentActiveIndex + 1));
    //     carouselContainer.appendChild(nextButton);
    //   }
    
    //   // Function to update the active slide based on the index
    //   function updateActiveSlide(newIndex) {
    //     if (newIndex < 0) {
    //       newIndex = slides.length - 1;
    //     } else if (newIndex >= slides.length) {
    //       newIndex = 0;
    //     }
    //     slides[currentActiveIndex].classList.remove('active');
    //     slides[newIndex].classList.add('active');
    //     currentActiveIndex = newIndex;
    //   }
    
    //   // Set interval to periodically update the active slide
    //   function startInterval() {
    //     intervalId = setInterval(() => updateActiveSlide(currentActiveIndex + 1), 2000);
    //   }
    
    //   // Stop interval when mouse enters the carousel area
    //   carouselContainer.addEventListener('mouseenter', () => {
    //     clearInterval(intervalId);
    //   });
    
    //   // Restart interval when mouse leaves the carousel area
    //   carouselContainer.addEventListener('mouseleave', startInterval);
    
    //   // Start the interval and create navigation buttons on initialization
    //   startInterval();
    //   createNavButtons();
    // }
    
      // Call the createCarousels function with jsonArray
      const carouselsHTML = createCarousels(jsonArray);
    
      // Check if the container elements exist before trying to set their innerHTML
      var desktopCarouselContainer = document.getElementById('desktopCarouselContainer');
      var thumbnailCarouselContainer = document.getElementById('thumbnailCarouselContainer');
    
      if (desktopCarouselContainer && thumbnailCarouselContainer) {
        desktopCarouselContainer.innerHTML = carouselsHTML.desktopCarouselHTML;
        thumbnailCarouselContainer.innerHTML = carouselsHTML.thumbnailCarouselHTML;
    
     // Setup the interval to change the active class
     setupCarouselInterval(desktopCarouselContainer, '.main_slide_item', 2000);
        setupCarouselInterval(thumbnailCarouselContainer, '.thumb_slide_item', 2000);
    
    
        console.log('Carousels populated successfully.');
      } else {
        console.error('Carousel containers not found.');
      }
    
      function setupCarouselInterval(carouselContainer, slideSelector, interval) {
      let currentActiveIndex = 0;
      let slides = carouselContainer.querySelectorAll(slideSelector);
    
      // Function to update the active slide
      function updateActiveSlide() {
        // Remove active class from all slides
        slides.forEach(slide => slide.classList.remove('active'));
        
        // Add active class to the current slide
        slides[currentActiveIndex].classList.add('active');
        
        // Update the index for the next slide
        currentActiveIndex = (currentActiveIndex + 1) % slides.length;
      }
    
      // Initial call to set the first slide as active
      updateActiveSlide();
    
      // Set interval to periodically update the active slide
      setInterval(updateActiveSlide, interval);
    }
    
    
    // prev code
    function activateMainSlide(index) {
        const mainSlideItems = document.querySelectorAll(".main_slide_item");
        mainSlideItems.forEach((item) => item.classList.remove("active"));
        mainSlideItems[index].classList.add("active");
      }
      
      function activateThumbnailSlide(index) {
        const thumbSlideItems = document.querySelectorAll(".thumb_slide_item");
        thumbSlideItems.forEach((item) => item.classList.remove("active"));
        thumbSlideItems[index].classList.add("active");
    
        // maximum scroll position to ensure the last items are fully visible
        const thumbSlideItemWidth = thumbSlideItems[0].offsetWidth;
        const thumbSliderButtonWidth = thumbSliderButton.offsetWidth;
        const totalWidth = thumbSlideItemWidth * locations.length;
        const maxScrollPosition = totalWidth - thumbSliderButtonWidth;
    
        // scroll position for the current item
        let scrollPosition = thumbSlideItemWidth * index;
        const centerOffset = thumbSliderButtonWidth / 1.15;
    
        // Adjust scrollPosition if the current item is one of the last few items
        if (index >= locations.length - 1) {
          scrollPosition = maxScrollPosition;
        } else if (index > 0) {
          scrollPosition -= centerOffset;
        }
    
        // make sure the scrollPosition stays within bounds
        scrollPosition = Math.max(0, Math.min(maxScrollPosition, scrollPosition));
    
        thumbSlide.scrollLeft = scrollPosition;
      }
    
      function activateSlide(index) {
        activateMainSlide(index); // Apply active class to main slides
        activateThumbnailSlide(index); // Apply active class to thumbnail slides
      }
    
      function nextSlide() {
        currentIndex = (currentIndex + 1) % locations.length;
        activateSlide(currentIndex);
      }
    
      let slideInterval = setInterval(nextSlide, 2000);
    
      thumbSlide.addEventListener("mouseenter", function () {
        clearInterval(slideInterval);
      });
    
      thumbSlide.addEventListener("mouseleave", function () {
        slideInterval = setInterval(nextSlide, 2000);
      });
    
      activateSlide(currentIndex);
    
      // Add these variables to your existing code
      const prevButton = document.getElementById("slide-arrow-prev");
      const nextButton = document.getElementById("slide-arrow-next");
    
      // Add event listeners to the previous and next buttons
      prevButton.addEventListener("click", () => {
        currentIndex = (currentIndex - 1 + locations.length) % locations.length;
        activateSlide(currentIndex);
      });
    
      nextButton.addEventListener("click", () => {
        currentIndex = (currentIndex + 1) % locations.length;
        activateSlide(currentIndex);
      });
    
    
    });
    
    
    
    
    </script>
    
    